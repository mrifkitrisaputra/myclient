{
    "sourceFile": "src/main/java/com/client/render/SpriteAnimation.java",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1764831883074,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1764832274777,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-package com.client.render;\r\n+package com.myclient.render;\r\n \r\n import javafx.scene.image.Image;\r\n import javafx.scene.image.WritableImage;\r\n \r\n@@ -13,34 +13,25 @@\n     private boolean loop = true;\r\n     private boolean finished = false;\r\n \r\n     public SpriteAnimation(Image... frames) {\r\n-\r\n         if (frames == null || frames.length == 0) {\r\n             // Prevent crash → placeholder 1px\r\n             this.frames = new Image[]{ new WritableImage(1, 1) };\r\n         } else {\r\n             this.frames = frames;\r\n         }\r\n     }\r\n \r\n-    /**\r\n-     * Update animation and return the current frame.\r\n-     *\r\n-     * @param dt delta time (seconds)\r\n-     * @return current frame image\r\n-     */\r\n     public Image update(double dt) {\r\n         if (!loop && finished) {\r\n             return frames[frames.length - 1];\r\n         }\r\n \r\n         timer += dt;\r\n \r\n-        // Move to next frame if timer reached threshold\r\n         while (timer >= frameTime) {\r\n             timer -= frameTime;\r\n-\r\n             if (loop) {\r\n                 index = (index + 1) % frames.length;\r\n             } else {\r\n                 if (index < frames.length - 1) {\r\n@@ -49,37 +40,20 @@\n                     finished = true;\r\n                 }\r\n             }\r\n         }\r\n-\r\n         return frames[index];\r\n     }\r\n \r\n-    /** Reset animation back to first frame. */\r\n     public void reset() {\r\n         index = 0;\r\n         timer = 0;\r\n         finished = false;\r\n     }\r\n \r\n-    // ----------- SETTERS / GETTERS -----------\r\n-\r\n-    public void setFrameTime(double time) {\r\n-        this.frameTime = Math.max(0.01, time); // Prevent zero division\r\n-    }\r\n-\r\n-    public void setLoop(boolean loop) {\r\n-        this.loop = loop;\r\n-    }\r\n-\r\n-    public boolean isFinished() {\r\n-        return finished;\r\n-    }\r\n-\r\n-    public int getFrameIndex() {\r\n-        return index;\r\n-    }\r\n-\r\n     public Image getCurrentFrame() {\r\n         return frames[index];\r\n     }\r\n-}\r\n+\r\n+    public void setLoop(boolean loop) { this.loop = loop; }\r\n+    public boolean isFinished() { return finished; }\r\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1764832294586,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,59 +1,47 @@\n-package com.client.render;\r\n+package com.myclient.render;\r\n \r\n+import java.util.HashMap;\r\n import javafx.scene.image.Image;\r\n-import javafx.scene.image.WritableImage;\r\n \r\n-public class SpriteAnimation {\r\n+public class SpriteLoader {\r\n \r\n-    private final Image[] frames;\r\n-    private int index = 0;\r\n-    private double timer = 0;\r\n+    private final HashMap<String, Image> cache = new HashMap<>();\r\n \r\n-    private double frameTime = 0.12;   // Durasi setiap frame\r\n-    private boolean loop = true;\r\n-    private boolean finished = false;\r\n+    // Path folder aset Anda (sesuai struktur folder lama)\r\n+    private static final String PLAYER_PATH = \"/com/client/assets/player/\";\r\n \r\n-    public SpriteAnimation(Image... frames) {\r\n-        if (frames == null || frames.length == 0) {\r\n-            // Prevent crash → placeholder 1px\r\n-            this.frames = new Image[]{ new WritableImage(1, 1) };\r\n-        } else {\r\n-            this.frames = frames;\r\n+    /**\r\n+     * Method ini dipanggil oleh VisualPlayer: loader.get(\"sP2Down_0\")\r\n+     * Kita harus memetakan nama string ke file PNG yang benar.\r\n+     */\r\n+    public Image get(String name) {\r\n+        if (cache.containsKey(name)) {\r\n+            return cache.get(name);\r\n         }\r\n-    }\r\n \r\n-    public Image update(double dt) {\r\n-        if (!loop && finished) {\r\n-            return frames[frames.length - 1];\r\n-        }\r\n-\r\n-        timer += dt;\r\n-\r\n-        while (timer >= frameTime) {\r\n-            timer -= frameTime;\r\n-            if (loop) {\r\n-                index = (index + 1) % frames.length;\r\n-            } else {\r\n-                if (index < frames.length - 1) {\r\n-                    index++;\r\n-                } else {\r\n-                    finished = true;\r\n-                }\r\n+        // Coba load dari folder player (asumsi nama file = nama key + .png)\r\n+        // Jika struktur file Anda beda, sesuaikan path ini.\r\n+        String fullPath = PLAYER_PATH + name + \".png\";\r\n+        \r\n+        try {\r\n+            Image img = new Image(getClass().getResourceAsStream(fullPath));\r\n+            if (img.isError()) {\r\n+                System.err.println(\"Gagal load sprite: \" + name);\r\n+                return null;\r\n             }\r\n+            cache.put(name, img);\r\n+            return img;\r\n+        } catch (Exception e) {\r\n+            // Jika file tidak ditemukan, return null agar VisualPlayer menangani fallback\r\n+            return null;\r\n         }\r\n-        return frames[index];\r\n     }\r\n \r\n-    public void reset() {\r\n-        index = 0;\r\n-        timer = 0;\r\n-        finished = false;\r\n+    // Method manual load jika diperlukan di tempat lain\r\n+    public Image load(String path) {\r\n+        if (cache.containsKey(path)) return cache.get(path);\r\n+        Image img = new Image(getClass().getResourceAsStream(path));\r\n+        cache.put(path, img);\r\n+        return img;\r\n     }\r\n-\r\n-    public Image getCurrentFrame() {\r\n-        return frames[index];\r\n-    }\r\n-\r\n-    public void setLoop(boolean loop) { this.loop = loop; }\r\n-    public boolean isFinished() { return finished; }\r\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1764832362424,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,9 +7,9 @@\n \r\n     private final HashMap<String, Image> cache = new HashMap<>();\r\n \r\n     // Path folder aset Anda (sesuai struktur folder lama)\r\n-    private static final String PLAYER_PATH = \"/com/client/assets/player/\";\r\n+    private static final String PLAYER_PATH = \"/com/client/assets/player/\";\r\n \r\n     /**\r\n      * Method ini dipanggil oleh VisualPlayer: loader.get(\"sP2Down_0\")\r\n      * Kita harus memetakan nama string ke file PNG yang benar.\r\n"
                }
            ],
            "date": 1764831883074,
            "name": "Commit-0",
            "content": "package com.client.render;\r\n\r\nimport javafx.scene.image.Image;\r\nimport javafx.scene.image.WritableImage;\r\n\r\npublic class SpriteAnimation {\r\n\r\n    private final Image[] frames;\r\n    private int index = 0;\r\n    private double timer = 0;\r\n\r\n    private double frameTime = 0.12;   // Durasi setiap frame\r\n    private boolean loop = true;\r\n    private boolean finished = false;\r\n\r\n    public SpriteAnimation(Image... frames) {\r\n\r\n        if (frames == null || frames.length == 0) {\r\n            // Prevent crash → placeholder 1px\r\n            this.frames = new Image[]{ new WritableImage(1, 1) };\r\n        } else {\r\n            this.frames = frames;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update animation and return the current frame.\r\n     *\r\n     * @param dt delta time (seconds)\r\n     * @return current frame image\r\n     */\r\n    public Image update(double dt) {\r\n        if (!loop && finished) {\r\n            return frames[frames.length - 1];\r\n        }\r\n\r\n        timer += dt;\r\n\r\n        // Move to next frame if timer reached threshold\r\n        while (timer >= frameTime) {\r\n            timer -= frameTime;\r\n\r\n            if (loop) {\r\n                index = (index + 1) % frames.length;\r\n            } else {\r\n                if (index < frames.length - 1) {\r\n                    index++;\r\n                } else {\r\n                    finished = true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return frames[index];\r\n    }\r\n\r\n    /** Reset animation back to first frame. */\r\n    public void reset() {\r\n        index = 0;\r\n        timer = 0;\r\n        finished = false;\r\n    }\r\n\r\n    // ----------- SETTERS / GETTERS -----------\r\n\r\n    public void setFrameTime(double time) {\r\n        this.frameTime = Math.max(0.01, time); // Prevent zero division\r\n    }\r\n\r\n    public void setLoop(boolean loop) {\r\n        this.loop = loop;\r\n    }\r\n\r\n    public boolean isFinished() {\r\n        return finished;\r\n    }\r\n\r\n    public int getFrameIndex() {\r\n        return index;\r\n    }\r\n\r\n    public Image getCurrentFrame() {\r\n        return frames[index];\r\n    }\r\n}\r\n"
        }
    ]
}