{
    "sourceFile": "src/main/java/com/client/ui/GameOverPopup.java",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 12,
            "patches": [
                {
                    "date": 1764831883081,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1764834459689,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,10 +1,7 @@\n-// src/main/java/com/client/ui/GameOverPopup.java\r\n-package com.client.ui;\r\n+package com.myclient.ui;\r\n \r\n-import com.client.App;\r\n-import com.client.managers.RoomManager;\r\n-\r\n+import com.myclient.App;\r\n import javafx.geometry.Pos;\r\n import javafx.scene.control.Button;\r\n import javafx.scene.control.Label;\r\n import javafx.scene.layout.HBox;\r\n@@ -14,13 +11,8 @@\n import javafx.scene.text.FontWeight;\r\n \r\n public class GameOverPopup extends VBox {\r\n \r\n-    private int voteCount = 0;\r\n-    private final int MIN_VOTES = 3;\r\n-    private Label lblVotes;\r\n-    private Button btnRematch;\r\n-\r\n     public GameOverPopup(boolean isWin) {\r\n         this.setAlignment(Pos.CENTER);\r\n         this.setSpacing(20);\r\n         this.setStyle(\"-fx-background-color: rgba(0, 0, 0, 0.9); -fx-padding: 40; -fx-background-radius: 20;\");\r\n@@ -30,68 +22,47 @@\n         title.setFont(Font.font(\"Segoe UI\", FontWeight.BOLD, 48));\r\n         title.setTextFill(isWin ? Color.GOLD : Color.RED);\r\n \r\n         // --- REMATCH SECTION ---\r\n-        lblVotes = new Label(\"Rematch Votes: 0/\" + MIN_VOTES);\r\n-        lblVotes.setTextFill(Color.WHITE);\r\n-        lblVotes.setFont(Font.font(18));\r\n+        Label lblInfo = new Label(\"Vote to play again...\");\r\n+        lblInfo.setTextFill(Color.WHITE);\r\n+        lblInfo.setFont(Font.font(18));\r\n \r\n-        btnRematch = new Button(\"Vote Rematch\");\r\n+        Button btnRematch = new Button(\"Vote Rematch\");\r\n         styleButton(btnRematch, \"#2980b9\"); // Biru\r\n \r\n-        btnRematch.setOnAction(e -> handleVote());\r\n+        // Logic Vote Rematch\r\n+        btnRematch.setOnAction(e -> {\r\n+            // 1. Disable tombol agar tidak spam\r\n+            btnRematch.setDisable(true);\r\n+            btnRematch.setText(\"Waiting for others...\");\r\n \r\n-        // Tombol Host (Accept Rematch) - Awalnya hidden\r\n-        Button btnHostAccept = new Button(\"START REMATCH\");\r\n-        styleButton(btnHostAccept, \"#27ae60\"); // Hijau\r\n-        btnHostAccept.setVisible(false); // Muncul jika vote cukup & user adalah host\r\n-\r\n-        // Logic Simulasi jika vote terpenuhi\r\n-        btnHostAccept.setOnAction(e -> {\r\n-            App.startGame(App.currentStage); // Restart Game\r\n+            // 2. Kirim sinyal ke Server\r\n+            if (App.network != null) {\r\n+                App.network.send(\"VOTE_REMATCH\");\r\n+            }\r\n         });\r\n \r\n         // --- LEAVE BUTTON ---\r\n         Button btnLeave = new Button(\"Leave Room\");\r\n         styleButton(btnLeave, \"#c0392b\"); // Merah\r\n+        \r\n         btnLeave.setOnAction(e -> {\r\n-            RoomManager.playerLeft(\"Player 1 (You)\"); // Trigger logic keluar\r\n+            // 1. Kirim sinyal keluar\r\n+            if (App.network != null) {\r\n+                App.network.send(\"LEAVE_ROOM\");\r\n+            }\r\n+            \r\n+            // 2. Kembali ke Lobby\r\n             SceneManager.toLobby();\r\n         });\r\n \r\n         HBox buttonBox = new HBox(20, btnLeave, btnRematch);\r\n         buttonBox.setAlignment(Pos.CENTER);\r\n \r\n-        this.getChildren().addAll(title, lblVotes, buttonBox, btnHostAccept);\r\n-\r\n-        // Simpan referensi button host biar bisa diupdate\r\n-        this.btnHostStart = btnHostAccept;\r\n+        this.getChildren().addAll(title, lblInfo, buttonBox);\r\n     }\r\n-    \r\n-    private Button btnHostStart;\r\n \r\n-    private void handleVote() {\r\n-        btnRematch.setDisable(true); // Disable biar gak spam vote\r\n-        btnRematch.setText(\"Voted!\");\r\n-        \r\n-        // SIMULASI: Anggap player lain langsung setuju\r\n-        voteCount++; // Vote kita\r\n-        updateVoteUI();\r\n-\r\n-        // Simulasi delay bot voting (pake thread sleep ala-ala atau langsung aja)\r\n-        voteCount += 2; // Simulasi 2 player lain vote\r\n-        updateVoteUI();\r\n-    }\r\n-\r\n-    private void updateVoteUI() {\r\n-        lblVotes.setText(\"Rematch Votes: \" + voteCount + \"/\" + MIN_VOTES);\r\n-        \r\n-        // Jika vote cukup DAN kita adalah HOST -> Tampilkan tombol Start\r\n-        if (voteCount >= MIN_VOTES && RoomManager.isHost()) {\r\n-            btnHostStart.setVisible(true);\r\n-        }\r\n-    }\r\n-\r\n     private void styleButton(Button btn, String color) {\r\n         btn.setStyle(\"-fx-background-color: \" + color + \"; -fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold;\");\r\n         btn.setPrefSize(160, 40);\r\n     }\r\n"
                },
                {
                    "date": 1764834465312,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-package com.myclient.ui;\r\n+package com.client.ui;\r\n \r\n import com.myclient.App;\r\n import javafx.geometry.Pos;\r\n import javafx.scene.control.Button;\r\n"
                },
                {
                    "date": 1765193595023,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,33 +12,61 @@\n import javafx.scene.text.FontWeight;\r\n \r\n public class GameOverPopup extends VBox {\r\n \r\n-    public GameOverPopup(boolean isWin) {\r\n+    // [TAMBAHAN PARAMETER] isSpectator: True jika player mati tapi game belum berakhir\r\n+    public GameOverPopup(boolean isWin, boolean isSpectator) {\r\n         this.setAlignment(Pos.CENTER);\r\n         this.setSpacing(20);\r\n+        // Default agak gelap\r\n         this.setStyle(\"-fx-background-color: rgba(0, 0, 0, 0.9); -fx-padding: 40; -fx-background-radius: 20;\");\r\n         this.setMaxSize(500, 400);\r\n \r\n         Label title = new Label(isWin ? \"VICTORY!\" : \"YOU DIED\");\r\n         title.setFont(Font.font(\"Segoe UI\", FontWeight.BOLD, 48));\r\n         title.setTextFill(isWin ? Color.GOLD : Color.RED);\r\n \r\n-        // --- REMATCH SECTION ---\r\n-        Label lblInfo = new Label(\"Vote to play again...\");\r\n+        // --- REMATCH / INFO SECTION ---\r\n+        String infoText = isSpectator \r\n+            ? \"Game is still running. You can spectate.\" \r\n+            : \"Vote to play again...\";\r\n+            \r\n+        Label lblInfo = new Label(infoText);\r\n         lblInfo.setTextFill(Color.WHITE);\r\n         lblInfo.setFont(Font.font(18));\r\n \r\n         Button btnRematch = new Button(\"Vote Rematch\");\r\n         styleButton(btnRematch, \"#2980b9\"); // Biru\r\n \r\n+        // --- SPECTATE BUTTON (Khusus jika mati duluan) ---\r\n+        Button btnSpectate = new Button(\"Spectate\");\r\n+        styleButton(btnSpectate, \"#8e44ad\"); // Ungu\r\n+        // Tombol ini hanya menyembunyikan background popup agar bisa nonton\r\n+        btnSpectate.setOnAction(e -> {\r\n+            this.setStyle(\"-fx-background-color: rgba(0, 0, 0, 0.2);\"); // Transparan\r\n+            title.setVisible(false);\r\n+            btnSpectate.setVisible(false);\r\n+            lblInfo.setText(\"Spectating... Waiting for Host to Rematch\");\r\n+        });\r\n+\r\n+        // Jika game sudah over total, tombol spectate tidak perlu\r\n+        if (!isSpectator) {\r\n+            btnSpectate.setVisible(false);\r\n+            btnSpectate.setManaged(false); // Hapus dari layout\r\n+        }\r\n+\r\n         // Logic Vote Rematch\r\n         btnRematch.setOnAction(e -> {\r\n             // 1. Disable tombol agar tidak spam\r\n             btnRematch.setDisable(true);\r\n-            btnRematch.setText(\"Waiting for others...\");\r\n+            btnRematch.setText(\"Waiting for Host...\");\r\n \r\n-            // 2. Kirim sinyal ke Server\r\n+            // 2. Ubah tampilan jadi mode spectre (transparan)\r\n+            this.setStyle(\"-fx-background-color: rgba(0, 0, 0, 0.3);\"); // Transparan\r\n+            title.setVisible(false); \r\n+            btnSpectate.setVisible(false); // Hide tombol spectate kalau sudah vote\r\n+\r\n+            // 3. Kirim sinyal ke Server\r\n             if (App.network != null) {\r\n                 App.network.send(\"VOTE_REMATCH\");\r\n             }\r\n         });\r\n@@ -57,8 +85,9 @@\n             SceneManager.toLobby();\r\n         });\r\n \r\n         HBox buttonBox = new HBox(20, btnLeave, btnRematch);\r\n+        if (isSpectator) buttonBox.getChildren().add(btnSpectate); // Tambah tombol spectate di tengah\r\n         buttonBox.setAlignment(Pos.CENTER);\r\n \r\n         this.getChildren().addAll(title, lblInfo, buttonBox);\r\n     }\r\n"
                },
                {
                    "date": 1765194968254,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,61 +12,33 @@\n import javafx.scene.text.FontWeight;\r\n \r\n public class GameOverPopup extends VBox {\r\n \r\n-    // [TAMBAHAN PARAMETER] isSpectator: True jika player mati tapi game belum berakhir\r\n-    public GameOverPopup(boolean isWin, boolean isSpectator) {\r\n+    public GameOverPopup(boolean isWin) {\r\n         this.setAlignment(Pos.CENTER);\r\n         this.setSpacing(20);\r\n-        // Default agak gelap\r\n         this.setStyle(\"-fx-background-color: rgba(0, 0, 0, 0.9); -fx-padding: 40; -fx-background-radius: 20;\");\r\n         this.setMaxSize(500, 400);\r\n \r\n         Label title = new Label(isWin ? \"VICTORY!\" : \"YOU DIED\");\r\n         title.setFont(Font.font(\"Segoe UI\", FontWeight.BOLD, 48));\r\n         title.setTextFill(isWin ? Color.GOLD : Color.RED);\r\n \r\n-        // --- REMATCH / INFO SECTION ---\r\n-        String infoText = isSpectator \r\n-            ? \"Game is still running. You can spectate.\" \r\n-            : \"Vote to play again...\";\r\n-            \r\n-        Label lblInfo = new Label(infoText);\r\n+        // --- REMATCH SECTION ---\r\n+        Label lblInfo = new Label(\"Vote to play again...\");\r\n         lblInfo.setTextFill(Color.WHITE);\r\n         lblInfo.setFont(Font.font(18));\r\n \r\n         Button btnRematch = new Button(\"Vote Rematch\");\r\n         styleButton(btnRematch, \"#2980b9\"); // Biru\r\n \r\n-        // --- SPECTATE BUTTON (Khusus jika mati duluan) ---\r\n-        Button btnSpectate = new Button(\"Spectate\");\r\n-        styleButton(btnSpectate, \"#8e44ad\"); // Ungu\r\n-        // Tombol ini hanya menyembunyikan background popup agar bisa nonton\r\n-        btnSpectate.setOnAction(e -> {\r\n-            this.setStyle(\"-fx-background-color: rgba(0, 0, 0, 0.2);\"); // Transparan\r\n-            title.setVisible(false);\r\n-            btnSpectate.setVisible(false);\r\n-            lblInfo.setText(\"Spectating... Waiting for Host to Rematch\");\r\n-        });\r\n-\r\n-        // Jika game sudah over total, tombol spectate tidak perlu\r\n-        if (!isSpectator) {\r\n-            btnSpectate.setVisible(false);\r\n-            btnSpectate.setManaged(false); // Hapus dari layout\r\n-        }\r\n-\r\n         // Logic Vote Rematch\r\n         btnRematch.setOnAction(e -> {\r\n             // 1. Disable tombol agar tidak spam\r\n             btnRematch.setDisable(true);\r\n-            btnRematch.setText(\"Waiting for Host...\");\r\n+            btnRematch.setText(\"Waiting for others...\");\r\n \r\n-            // 2. Ubah tampilan jadi mode spectre (transparan)\r\n-            this.setStyle(\"-fx-background-color: rgba(0, 0, 0, 0.3);\"); // Transparan\r\n-            title.setVisible(false); \r\n-            btnSpectate.setVisible(false); // Hide tombol spectate kalau sudah vote\r\n-\r\n-            // 3. Kirim sinyal ke Server\r\n+            // 2. Kirim sinyal ke Server\r\n             if (App.network != null) {\r\n                 App.network.send(\"VOTE_REMATCH\");\r\n             }\r\n         });\r\n@@ -85,9 +57,8 @@\n             SceneManager.toLobby();\r\n         });\r\n \r\n         HBox buttonBox = new HBox(20, btnLeave, btnRematch);\r\n-        if (isSpectator) buttonBox.getChildren().add(btnSpectate); // Tambah tombol spectate di tengah\r\n         buttonBox.setAlignment(Pos.CENTER);\r\n \r\n         this.getChildren().addAll(title, lblInfo, buttonBox);\r\n     }\r\n"
                },
                {
                    "date": 1765195837285,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,9 @@\n package com.client.ui;\r\n \r\n-import com.myclient.App;\r\n+import com.client.App;\r\n+\r\n+import javafx.application.Platform;\r\n import javafx.geometry.Pos;\r\n import javafx.scene.control.Button;\r\n import javafx.scene.control.Label;\r\n import javafx.scene.layout.HBox;\r\n@@ -11,59 +13,98 @@\n import javafx.scene.text.FontWeight;\r\n \r\n public class GameOverPopup extends VBox {\r\n \r\n+    private final Button btnRematch;\r\n+    private final Label lblInfo;\r\n+\r\n     public GameOverPopup(boolean isWin) {\r\n         this.setAlignment(Pos.CENTER);\r\n         this.setSpacing(20);\r\n-        this.setStyle(\"-fx-background-color: rgba(0, 0, 0, 0.9); -fx-padding: 40; -fx-background-radius: 20;\");\r\n+        // Background hitam transparan (0.9 opacity) dengan corner radius\r\n+        this.setStyle(\"-fx-background-color: rgba(0, 0, 0, 0.9); -fx-padding: 40; -fx-background-radius: 20; -fx-border-color: white; -fx-border-width: 2; -fx-border-radius: 20;\");\r\n         this.setMaxSize(500, 400);\r\n \r\n+        // --- TITLE ---\r\n         Label title = new Label(isWin ? \"VICTORY!\" : \"YOU DIED\");\r\n         title.setFont(Font.font(\"Segoe UI\", FontWeight.BOLD, 48));\r\n         title.setTextFill(isWin ? Color.GOLD : Color.RED);\r\n+        // Efek shadow pada text\r\n+        title.setStyle(\"-fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.8), 10, 0, 0, 0);\");\r\n \r\n-        // --- REMATCH SECTION ---\r\n-        Label lblInfo = new Label(\"Vote to play again...\");\r\n+        // --- INFO TEXT ---\r\n+        lblInfo = new Label(\"Vote to play again...\");\r\n         lblInfo.setTextFill(Color.WHITE);\r\n         lblInfo.setFont(Font.font(18));\r\n \r\n-        Button btnRematch = new Button(\"Vote Rematch\");\r\n+        // --- BUTTONS ---\r\n+        btnRematch = new Button(\"Vote Rematch\");\r\n         styleButton(btnRematch, \"#2980b9\"); // Biru\r\n \r\n-        // Logic Vote Rematch\r\n+        Button btnLeave = new Button(\"Leave Room\");\r\n+        styleButton(btnLeave, \"#c0392b\"); // Merah\r\n+\r\n+        // --- EVENT HANDLERS ---\r\n+\r\n+        // 1. Logic Vote Rematch\r\n         btnRematch.setOnAction(e -> {\r\n-            // 1. Disable tombol agar tidak spam\r\n+            // Disable tombol agar tidak spam & update text\r\n             btnRematch.setDisable(true);\r\n-            btnRematch.setText(\"Waiting for others...\");\r\n+            btnRematch.setText(\"Voted!\");\r\n+            lblInfo.setText(\"Waiting for other players...\");\r\n \r\n-            // 2. Kirim sinyal ke Server\r\n+            // Kirim sinyal ke Server\r\n             if (App.network != null) {\r\n                 App.network.send(\"VOTE_REMATCH\");\r\n             }\r\n         });\r\n \r\n-        // --- LEAVE BUTTON ---\r\n-        Button btnLeave = new Button(\"Leave Room\");\r\n-        styleButton(btnLeave, \"#c0392b\"); // Merah\r\n-        \r\n+        // 2. Logic Leave Room\r\n         btnLeave.setOnAction(e -> {\r\n-            // 1. Kirim sinyal keluar\r\n+            // Kirim sinyal keluar\r\n             if (App.network != null) {\r\n                 App.network.send(\"LEAVE_ROOM\");\r\n             }\r\n-            \r\n-            // 2. Kembali ke Lobby\r\n+            // Kembali ke Lobby via SceneManager\r\n             SceneManager.toLobby();\r\n         });\r\n \r\n+        // Layout Tombol\r\n         HBox buttonBox = new HBox(20, btnLeave, btnRematch);\r\n         buttonBox.setAlignment(Pos.CENTER);\r\n \r\n+        // Tambahkan komponen ke VBox\r\n         this.getChildren().addAll(title, lblInfo, buttonBox);\r\n     }\r\n \r\n     private void styleButton(Button btn, String color) {\r\n-        btn.setStyle(\"-fx-background-color: \" + color + \"; -fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold;\");\r\n+        // Styling CSS sederhana untuk tombol\r\n+        btn.setStyle(\r\n+            \"-fx-background-color: \" + color + \"; \" +\r\n+            \"-fx-text-fill: white; \" +\r\n+            \"-fx-font-size: 16px; \" +\r\n+            \"-fx-font-weight: bold; \" +\r\n+            \"-fx-cursor: hand; \" +\r\n+            \"-fx-background-radius: 10;\"\r\n+        );\r\n         btn.setPrefSize(160, 40);\r\n+        \r\n+        // Efek Hover (sedikit lebih terang)\r\n+        btn.setOnMouseEntered(e -> btn.setStyle(\r\n+            \"-fx-background-color: derive(\" + color + \", 20%); \" +\r\n+            \"-fx-text-fill: white; \" +\r\n+            \"-fx-font-size: 16px; \" +\r\n+            \"-fx-font-weight: bold; \" +\r\n+            \"-fx-cursor: hand; \" +\r\n+            \"-fx-background-radius: 10;\"\r\n+        ));\r\n+        \r\n+        btn.setOnMouseExited(e -> btn.setStyle(\r\n+            \"-fx-background-color: \" + color + \"; \" +\r\n+            \"-fx-text-fill: white; \" +\r\n+            \"-fx-font-size: 16px; \" +\r\n+            \"-fx-font-weight: bold; \" +\r\n+            \"-fx-cursor: hand; \" +\r\n+            \"-fx-background-radius: 10;\"\r\n+        ));\r\n     }\r\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1765196293518,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,7 @@\n package com.client.ui;\r\n \r\n import com.client.App;\r\n-\r\n-import javafx.application.Platform;\r\n import javafx.geometry.Pos;\r\n import javafx.scene.control.Button;\r\n import javafx.scene.control.Label;\r\n import javafx.scene.layout.HBox;\r\n@@ -13,98 +11,82 @@\n import javafx.scene.text.FontWeight;\r\n \r\n public class GameOverPopup extends VBox {\r\n \r\n+    private final Label lblVotes;\r\n     private final Button btnRematch;\r\n-    private final Label lblInfo;\r\n+    private final Button btnLeave;\r\n \r\n     public GameOverPopup(boolean isWin) {\r\n+        // --- SETUP LAYOUT SESUAI REFERENSI ---\r\n         this.setAlignment(Pos.CENTER);\r\n         this.setSpacing(20);\r\n-        // Background hitam transparan (0.9 opacity) dengan corner radius\r\n-        this.setStyle(\"-fx-background-color: rgba(0, 0, 0, 0.9); -fx-padding: 40; -fx-background-radius: 20; -fx-border-color: white; -fx-border-width: 2; -fx-border-radius: 20;\");\r\n+        // Background hitam transparan (0.9) dengan corner radius\r\n+        this.setStyle(\"-fx-background-color: rgba(0, 0, 0, 0.9); -fx-padding: 40; -fx-background-radius: 20; -fx-border-color: white; -fx-border-width: 1; -fx-border-radius: 20;\");\r\n         this.setMaxSize(500, 400);\r\n \r\n         // --- TITLE ---\r\n         Label title = new Label(isWin ? \"VICTORY!\" : \"YOU DIED\");\r\n         title.setFont(Font.font(\"Segoe UI\", FontWeight.BOLD, 48));\r\n         title.setTextFill(isWin ? Color.GOLD : Color.RED);\r\n-        // Efek shadow pada text\r\n+        // Efek shadow biar teks lebih pop-up\r\n         title.setStyle(\"-fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.8), 10, 0, 0, 0);\");\r\n \r\n-        // --- INFO TEXT ---\r\n-        lblInfo = new Label(\"Vote to play again...\");\r\n-        lblInfo.setTextFill(Color.WHITE);\r\n-        lblInfo.setFont(Font.font(18));\r\n+        // --- REMATCH INFO ---\r\n+        lblVotes = new Label(\"Waiting for players to vote...\");\r\n+        lblVotes.setTextFill(Color.WHITE);\r\n+        lblVotes.setFont(Font.font(18));\r\n \r\n         // --- BUTTONS ---\r\n         btnRematch = new Button(\"Vote Rematch\");\r\n-        styleButton(btnRematch, \"#2980b9\"); // Biru\r\n+        styleButton(btnRematch, \"#2980b9\"); // Warna Biru\r\n \r\n-        Button btnLeave = new Button(\"Leave Room\");\r\n-        styleButton(btnLeave, \"#c0392b\"); // Merah\r\n+        btnLeave = new Button(\"Leave Room\");\r\n+        styleButton(btnLeave, \"#c0392b\"); // Warna Merah\r\n \r\n-        // --- EVENT HANDLERS ---\r\n-\r\n-        // 1. Logic Vote Rematch\r\n+        // --- LOGIC: VOTE REMATCH ---\r\n         btnRematch.setOnAction(e -> {\r\n-            // Disable tombol agar tidak spam & update text\r\n+            // 1. Disable tombol agar tidak spam\r\n             btnRematch.setDisable(true);\r\n             btnRematch.setText(\"Voted!\");\r\n-            lblInfo.setText(\"Waiting for other players...\");\r\n+            \r\n+            // 2. Update Label\r\n+            lblVotes.setText(\"Waiting for others...\");\r\n \r\n-            // Kirim sinyal ke Server\r\n+            // 3. Kirim sinyal ke Server (Server yang akan menghitung vote)\r\n             if (App.network != null) {\r\n                 App.network.send(\"VOTE_REMATCH\");\r\n             }\r\n         });\r\n \r\n-        // 2. Logic Leave Room\r\n+        // --- LOGIC: LEAVE ROOM ---\r\n         btnLeave.setOnAction(e -> {\r\n-            // Kirim sinyal keluar\r\n+            // 1. Kirim sinyal keluar\r\n             if (App.network != null) {\r\n                 App.network.send(\"LEAVE_ROOM\");\r\n             }\r\n-            // Kembali ke Lobby via SceneManager\r\n+            \r\n+            // 2. Kembali ke Lobby\r\n             SceneManager.toLobby();\r\n         });\r\n \r\n-        // Layout Tombol\r\n+        // Layout Tombol Horizontal\r\n         HBox buttonBox = new HBox(20, btnLeave, btnRematch);\r\n         buttonBox.setAlignment(Pos.CENTER);\r\n \r\n         // Tambahkan komponen ke VBox\r\n-        this.getChildren().addAll(title, lblInfo, buttonBox);\r\n+        this.getChildren().addAll(title, lblVotes, buttonBox);\r\n     }\r\n \r\n     private void styleButton(Button btn, String color) {\r\n-        // Styling CSS sederhana untuk tombol\r\n-        btn.setStyle(\r\n-            \"-fx-background-color: \" + color + \"; \" +\r\n-            \"-fx-text-fill: white; \" +\r\n-            \"-fx-font-size: 16px; \" +\r\n-            \"-fx-font-weight: bold; \" +\r\n-            \"-fx-cursor: hand; \" +\r\n-            \"-fx-background-radius: 10;\"\r\n-        );\r\n+        // Styling CSS sesuai referensi + efek hover\r\n+        String baseStyle = \"-fx-background-color: \" + color + \"; -fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold; -fx-background-radius: 10; -fx-cursor: hand;\";\r\n+        btn.setStyle(baseStyle);\r\n         btn.setPrefSize(160, 40);\r\n         \r\n-        // Efek Hover (sedikit lebih terang)\r\n-        btn.setOnMouseEntered(e -> btn.setStyle(\r\n-            \"-fx-background-color: derive(\" + color + \", 20%); \" +\r\n-            \"-fx-text-fill: white; \" +\r\n-            \"-fx-font-size: 16px; \" +\r\n-            \"-fx-font-weight: bold; \" +\r\n-            \"-fx-cursor: hand; \" +\r\n-            \"-fx-background-radius: 10;\"\r\n-        ));\r\n+        // Efek saat mouse masuk (Hover) -> Warna lebih terang\r\n+        btn.setOnMouseEntered(e -> btn.setStyle(\"-fx-background-color: derive(\" + color + \", 20%); -fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold; -fx-background-radius: 10; -fx-cursor: hand;\"));\r\n         \r\n-        btn.setOnMouseExited(e -> btn.setStyle(\r\n-            \"-fx-background-color: \" + color + \"; \" +\r\n-            \"-fx-text-fill: white; \" +\r\n-            \"-fx-font-size: 16px; \" +\r\n-            \"-fx-font-weight: bold; \" +\r\n-            \"-fx-cursor: hand; \" +\r\n-            \"-fx-background-radius: 10;\"\r\n-        ));\r\n+        // Efek saat mouse keluar -> Kembali ke warna asal\r\n+        btn.setOnMouseExited(e -> btn.setStyle(baseStyle));\r\n     }\r\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1765196322899,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,9 @@\n package com.client.ui;\r\n \r\n import com.client.App;\r\n+\r\n+import javafx.application.Platform;\r\n import javafx.geometry.Pos;\r\n import javafx.scene.control.Button;\r\n import javafx.scene.control.Label;\r\n import javafx.scene.layout.HBox;\r\n@@ -11,82 +13,98 @@\n import javafx.scene.text.FontWeight;\r\n \r\n public class GameOverPopup extends VBox {\r\n \r\n-    private final Label lblVotes;\r\n     private final Button btnRematch;\r\n-    private final Button btnLeave;\r\n+    private final Label lblInfo;\r\n \r\n     public GameOverPopup(boolean isWin) {\r\n-        // --- SETUP LAYOUT SESUAI REFERENSI ---\r\n         this.setAlignment(Pos.CENTER);\r\n         this.setSpacing(20);\r\n-        // Background hitam transparan (0.9) dengan corner radius\r\n-        this.setStyle(\"-fx-background-color: rgba(0, 0, 0, 0.9); -fx-padding: 40; -fx-background-radius: 20; -fx-border-color: white; -fx-border-width: 1; -fx-border-radius: 20;\");\r\n+        // Background hitam transparan (0.9 opacity) dengan corner radius\r\n+        this.setStyle(\"-fx-background-color: rgba(0, 0, 0, 0.9); -fx-padding: 40; -fx-background-radius: 20; -fx-border-color: white; -fx-border-width: 2; -fx-border-radius: 20;\");\r\n         this.setMaxSize(500, 400);\r\n \r\n         // --- TITLE ---\r\n         Label title = new Label(isWin ? \"VICTORY!\" : \"YOU DIED\");\r\n         title.setFont(Font.font(\"Segoe UI\", FontWeight.BOLD, 48));\r\n         title.setTextFill(isWin ? Color.GOLD : Color.RED);\r\n-        // Efek shadow biar teks lebih pop-up\r\n+        // Efek shadow pada text\r\n         title.setStyle(\"-fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.8), 10, 0, 0, 0);\");\r\n \r\n-        // --- REMATCH INFO ---\r\n-        lblVotes = new Label(\"Waiting for players to vote...\");\r\n-        lblVotes.setTextFill(Color.WHITE);\r\n-        lblVotes.setFont(Font.font(18));\r\n+        // --- INFO TEXT ---\r\n+        lblInfo = new Label(\"Vote to play again...\");\r\n+        lblInfo.setTextFill(Color.WHITE);\r\n+        lblInfo.setFont(Font.font(18));\r\n \r\n         // --- BUTTONS ---\r\n         btnRematch = new Button(\"Vote Rematch\");\r\n-        styleButton(btnRematch, \"#2980b9\"); // Warna Biru\r\n+        styleButton(btnRematch, \"#2980b9\"); // Biru\r\n \r\n-        btnLeave = new Button(\"Leave Room\");\r\n-        styleButton(btnLeave, \"#c0392b\"); // Warna Merah\r\n+        Button btnLeave = new Button(\"Leave Room\");\r\n+        styleButton(btnLeave, \"#c0392b\"); // Merah\r\n \r\n-        // --- LOGIC: VOTE REMATCH ---\r\n+        // --- EVENT HANDLERS ---\r\n+\r\n+        // 1. Logic Vote Rematch\r\n         btnRematch.setOnAction(e -> {\r\n-            // 1. Disable tombol agar tidak spam\r\n+            // Disable tombol agar tidak spam & update text\r\n             btnRematch.setDisable(true);\r\n             btnRematch.setText(\"Voted!\");\r\n-            \r\n-            // 2. Update Label\r\n-            lblVotes.setText(\"Waiting for others...\");\r\n+            lblInfo.setText(\"Waiting for other players...\");\r\n \r\n-            // 3. Kirim sinyal ke Server (Server yang akan menghitung vote)\r\n+            // Kirim sinyal ke Server\r\n             if (App.network != null) {\r\n                 App.network.send(\"VOTE_REMATCH\");\r\n             }\r\n         });\r\n \r\n-        // --- LOGIC: LEAVE ROOM ---\r\n+        // 2. Logic Leave Room\r\n         btnLeave.setOnAction(e -> {\r\n-            // 1. Kirim sinyal keluar\r\n+            // Kirim sinyal keluar\r\n             if (App.network != null) {\r\n                 App.network.send(\"LEAVE_ROOM\");\r\n             }\r\n-            \r\n-            // 2. Kembali ke Lobby\r\n+            // Kembali ke Lobby via SceneManager\r\n             SceneManager.toLobby();\r\n         });\r\n \r\n-        // Layout Tombol Horizontal\r\n+        // Layout Tombol\r\n         HBox buttonBox = new HBox(20, btnLeave, btnRematch);\r\n         buttonBox.setAlignment(Pos.CENTER);\r\n \r\n         // Tambahkan komponen ke VBox\r\n-        this.getChildren().addAll(title, lblVotes, buttonBox);\r\n+        this.getChildren().addAll(title, lblInfo, buttonBox);\r\n     }\r\n \r\n     private void styleButton(Button btn, String color) {\r\n-        // Styling CSS sesuai referensi + efek hover\r\n-        String baseStyle = \"-fx-background-color: \" + color + \"; -fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold; -fx-background-radius: 10; -fx-cursor: hand;\";\r\n-        btn.setStyle(baseStyle);\r\n+        // Styling CSS sederhana untuk tombol\r\n+        btn.setStyle(\r\n+            \"-fx-background-color: \" + color + \"; \" +\r\n+            \"-fx-text-fill: white; \" +\r\n+            \"-fx-font-size: 16px; \" +\r\n+            \"-fx-font-weight: bold; \" +\r\n+            \"-fx-cursor: hand; \" +\r\n+            \"-fx-background-radius: 10;\"\r\n+        );\r\n         btn.setPrefSize(160, 40);\r\n         \r\n-        // Efek saat mouse masuk (Hover) -> Warna lebih terang\r\n-        btn.setOnMouseEntered(e -> btn.setStyle(\"-fx-background-color: derive(\" + color + \", 20%); -fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold; -fx-background-radius: 10; -fx-cursor: hand;\"));\r\n+        // Efek Hover (sedikit lebih terang)\r\n+        btn.setOnMouseEntered(e -> btn.setStyle(\r\n+            \"-fx-background-color: derive(\" + color + \", 20%); \" +\r\n+            \"-fx-text-fill: white; \" +\r\n+            \"-fx-font-size: 16px; \" +\r\n+            \"-fx-font-weight: bold; \" +\r\n+            \"-fx-cursor: hand; \" +\r\n+            \"-fx-background-radius: 10;\"\r\n+        ));\r\n         \r\n-        // Efek saat mouse keluar -> Kembali ke warna asal\r\n-        btn.setOnMouseExited(e -> btn.setStyle(baseStyle));\r\n+        btn.setOnMouseExited(e -> btn.setStyle(\r\n+            \"-fx-background-color: \" + color + \"; \" +\r\n+            \"-fx-text-fill: white; \" +\r\n+            \"-fx-font-size: 16px; \" +\r\n+            \"-fx-font-weight: bold; \" +\r\n+            \"-fx-cursor: hand; \" +\r\n+            \"-fx-background-radius: 10;\"\r\n+        ));\r\n     }\r\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1765196353134,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,9 @@\n     public GameOverPopup(boolean isWin) {\r\n         this.setAlignment(Pos.CENTER);\r\n         this.setSpacing(20);\r\n         // Background hitam transparan (0.9 opacity) dengan corner radius\r\n-        this.setStyle(\"-fx-background-color: rgba(0, 0, 0, 0.9); -fx-padding: 40; -fx-background-radius: 20; -fx-border-color: white; -fx-border-width: 2; -fx-border-radius: 20;\");\r\n+        this.setStyle(\"-fx-background-color: rgba(0, 0, 0, 0.9); -fx-padding: 40; -fx-background-radius: 20;\");\r\n         this.setMaxSize(500, 400);\r\n \r\n         // --- TITLE ---\r\n         Label title = new Label(isWin ? \"VICTORY!\" : \"YOU DIED\");\r\n"
                },
                {
                    "date": 1765196423370,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,9 +31,9 @@\n         // Efek shadow pada text\r\n         title.setStyle(\"-fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.8), 10, 0, 0, 0);\");\r\n \r\n         // --- INFO TEXT ---\r\n-        lblInfo = new Label(\"Vote to play again...\");\r\n+        lblVotes = new Label(\"Rematch Votes: 0/\" + MIN_VOTES);\r\n         lblInfo.setTextFill(Color.WHITE);\r\n         lblInfo.setFont(Font.font(18));\r\n \r\n         // --- BUTTONS ---\r\n"
                },
                {
                    "date": 1765196444052,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,9 +31,9 @@\n         // Efek shadow pada text\r\n         title.setStyle(\"-fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.8), 10, 0, 0, 0);\");\r\n \r\n         // --- INFO TEXT ---\r\n-        lblVotes = new Label(\"Rematch Votes: 0/\" + MIN_VOTES);\r\n+        lblInfo = new Label(\"Vote to play again...\");\r\n         lblInfo.setTextFill(Color.WHITE);\r\n         lblInfo.setFont(Font.font(18));\r\n \r\n         // --- BUTTONS ---\r\n"
                },
                {
                    "date": 1765196711817,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,7 @@\n package com.client.ui;\r\n \r\n import com.client.App;\r\n-\r\n import javafx.application.Platform;\r\n import javafx.geometry.Pos;\r\n import javafx.scene.control.Button;\r\n import javafx.scene.control.Label;\r\n@@ -13,98 +12,97 @@\n import javafx.scene.text.FontWeight;\r\n \r\n public class GameOverPopup extends VBox {\r\n \r\n+    private final Label lblVotes;\r\n     private final Button btnRematch;\r\n-    private final Label lblInfo;\r\n+    private final Button btnLeave;\r\n+    private final Button btnStartGame; // Tombol Khusus Host\r\n \r\n     public GameOverPopup(boolean isWin) {\r\n         this.setAlignment(Pos.CENTER);\r\n         this.setSpacing(20);\r\n-        // Background hitam transparan (0.9 opacity) dengan corner radius\r\n-        this.setStyle(\"-fx-background-color: rgba(0, 0, 0, 0.9); -fx-padding: 40; -fx-background-radius: 20;\");\r\n-        this.setMaxSize(500, 400);\r\n+        this.setStyle(\"-fx-background-color: rgba(0, 0, 0, 0.9); -fx-padding: 40; -fx-background-radius: 20; -fx-border-color: white; -fx-border-width: 1; -fx-border-radius: 20;\");\r\n+        this.setMaxSize(500, 450); // Tinggi ditambah sedikit\r\n \r\n         // --- TITLE ---\r\n         Label title = new Label(isWin ? \"VICTORY!\" : \"YOU DIED\");\r\n         title.setFont(Font.font(\"Segoe UI\", FontWeight.BOLD, 48));\r\n         title.setTextFill(isWin ? Color.GOLD : Color.RED);\r\n-        // Efek shadow pada text\r\n         title.setStyle(\"-fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.8), 10, 0, 0, 0);\");\r\n \r\n-        // --- INFO TEXT ---\r\n-        lblInfo = new Label(\"Vote to play again...\");\r\n-        lblInfo.setTextFill(Color.WHITE);\r\n-        lblInfo.setFont(Font.font(18));\r\n+        // --- VOTES LABEL ---\r\n+        // Default text, nanti diupdate server\r\n+        lblVotes = new Label(\"Rematch Votes: 0\"); \r\n+        lblVotes.setTextFill(Color.WHITE);\r\n+        lblVotes.setFont(Font.font(20));\r\n \r\n-        // --- BUTTONS ---\r\n+        // --- TOMBOL ACTIONS ---\r\n         btnRematch = new Button(\"Vote Rematch\");\r\n         styleButton(btnRematch, \"#2980b9\"); // Biru\r\n \r\n-        Button btnLeave = new Button(\"Leave Room\");\r\n+        btnLeave = new Button(\"Leave Room\");\r\n         styleButton(btnLeave, \"#c0392b\"); // Merah\r\n \r\n+        // --- TOMBOL HOST START ---\r\n+        btnStartGame = new Button(\"START GAME\");\r\n+        styleButton(btnStartGame, \"#27ae60\"); // Hijau\r\n+        \r\n+        // LOGIC: Cek apakah saya Host?\r\n+        // Kita asumsikan ada method App.gameState.amIHost() atau membandingkan ID\r\n+        boolean isHost = (App.gameState != null && App.gameState.amIHost());\r\n+        \r\n+        if (isHost) {\r\n+            btnStartGame.setVisible(true); // Host lihat tombol ini\r\n+        } else {\r\n+            btnStartGame.setVisible(false); // Player biasa tidak lihat\r\n+            btnStartGame.setManaged(false); // Agar tidak makan tempat layout\r\n+        }\r\n+\r\n         // --- EVENT HANDLERS ---\r\n \r\n-        // 1. Logic Vote Rematch\r\n+        // 1. Vote Rematch\r\n         btnRematch.setOnAction(e -> {\r\n-            // Disable tombol agar tidak spam & update text\r\n             btnRematch.setDisable(true);\r\n             btnRematch.setText(\"Voted!\");\r\n-            lblInfo.setText(\"Waiting for other players...\");\r\n-\r\n-            // Kirim sinyal ke Server\r\n-            if (App.network != null) {\r\n-                App.network.send(\"VOTE_REMATCH\");\r\n-            }\r\n+            if (App.network != null) App.network.send(\"VOTE_REMATCH\");\r\n         });\r\n \r\n-        // 2. Logic Leave Room\r\n+        // 2. Leave\r\n         btnLeave.setOnAction(e -> {\r\n-            // Kirim sinyal keluar\r\n-            if (App.network != null) {\r\n-                App.network.send(\"LEAVE_ROOM\");\r\n-            }\r\n-            // Kembali ke Lobby via SceneManager\r\n+            if (App.network != null) App.network.send(\"LEAVE_ROOM\");\r\n             SceneManager.toLobby();\r\n         });\r\n \r\n-        // Layout Tombol\r\n-        HBox buttonBox = new HBox(20, btnLeave, btnRematch);\r\n-        buttonBox.setAlignment(Pos.CENTER);\r\n+        // 3. Host Start Game\r\n+        btnStartGame.setOnAction(e -> {\r\n+            // Host memaksa game mulai ulang (biasanya menunggu vote cukup dulu, tapi terserah host)\r\n+            if (App.network != null) App.network.send(\"START_GAME\");\r\n+        });\r\n \r\n-        // Tambahkan komponen ke VBox\r\n-        this.getChildren().addAll(title, lblInfo, buttonBox);\r\n+        HBox voteBox = new HBox(20, btnLeave, btnRematch);\r\n+        voteBox.setAlignment(Pos.CENTER);\r\n+\r\n+        // Urutan: Judul -> Jumlah Vote -> Tombol Vote/Leave -> Tombol Start (Host Only)\r\n+        this.getChildren().addAll(title, lblVotes, voteBox, btnStartGame);\r\n     }\r\n \r\n+    // Method untuk diupdate oleh PacketParser/SceneManager\r\n+    public void updateVoteText(int current, int total) {\r\n+        Platform.runLater(() -> {\r\n+            lblVotes.setText(\"Rematch Votes: \" + current + \" / \" + total);\r\n+            \r\n+            // Opsional: Jika semua sudah vote, ubah warna tombol start biar menarik perhatian Host\r\n+            if (current == total && btnStartGame.isVisible()) {\r\n+                btnStartGame.setText(\"START NOW! (\" + current + \"/\" + total + \")\");\r\n+            }\r\n+        });\r\n+    }\r\n+\r\n     private void styleButton(Button btn, String color) {\r\n-        // Styling CSS sederhana untuk tombol\r\n-        btn.setStyle(\r\n-            \"-fx-background-color: \" + color + \"; \" +\r\n-            \"-fx-text-fill: white; \" +\r\n-            \"-fx-font-size: 16px; \" +\r\n-            \"-fx-font-weight: bold; \" +\r\n-            \"-fx-cursor: hand; \" +\r\n-            \"-fx-background-radius: 10;\"\r\n-        );\r\n-        btn.setPrefSize(160, 40);\r\n-        \r\n-        // Efek Hover (sedikit lebih terang)\r\n-        btn.setOnMouseEntered(e -> btn.setStyle(\r\n-            \"-fx-background-color: derive(\" + color + \", 20%); \" +\r\n-            \"-fx-text-fill: white; \" +\r\n-            \"-fx-font-size: 16px; \" +\r\n-            \"-fx-font-weight: bold; \" +\r\n-            \"-fx-cursor: hand; \" +\r\n-            \"-fx-background-radius: 10;\"\r\n-        ));\r\n-        \r\n-        btn.setOnMouseExited(e -> btn.setStyle(\r\n-            \"-fx-background-color: \" + color + \"; \" +\r\n-            \"-fx-text-fill: white; \" +\r\n-            \"-fx-font-size: 16px; \" +\r\n-            \"-fx-font-weight: bold; \" +\r\n-            \"-fx-cursor: hand; \" +\r\n-            \"-fx-background-radius: 10;\"\r\n-        ));\r\n+        String baseStyle = \"-fx-background-color: \" + color + \"; -fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold; -fx-background-radius: 10; -fx-cursor: hand;\";\r\n+        btn.setStyle(baseStyle);\r\n+        btn.setPrefSize(180, 45);\r\n+        btn.setOnMouseEntered(e -> btn.setStyle(\"-fx-background-color: derive(\" + color + \", 20%); -fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold; -fx-background-radius: 10; -fx-cursor: hand;\"));\r\n+        btn.setOnMouseExited(e -> btn.setStyle(baseStyle));\r\n     }\r\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1765197721328,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -86,14 +86,16 @@\n         this.getChildren().addAll(title, lblVotes, voteBox, btnStartGame);\r\n     }\r\n \r\n     // Method untuk diupdate oleh PacketParser/SceneManager\r\n-    public void updateVoteText(int current, int total) {\r\n+public void updateVoteText(int current, int total) {\r\n+        // Wajib pakai Platform.runLater karena dipanggil dari thread network\r\n         Platform.runLater(() -> {\r\n+            // Ganti teks labelnya!\r\n             lblVotes.setText(\"Rematch Votes: \" + current + \" / \" + total);\r\n             \r\n-            // Opsional: Jika semua sudah vote, ubah warna tombol start biar menarik perhatian Host\r\n-            if (current == total && btnStartGame.isVisible()) {\r\n+            // (Opsional) Efek visual ke tombol host jika vote penuh\r\n+            if (current == total && btnStartGame != null && btnStartGame.isVisible()) {\r\n                 btnStartGame.setText(\"START NOW! (\" + current + \"/\" + total + \")\");\r\n             }\r\n         });\r\n     }\r\n"
                }
            ],
            "date": 1764831883081,
            "name": "Commit-0",
            "content": "// src/main/java/com/client/ui/GameOverPopup.java\r\npackage com.client.ui;\r\n\r\nimport com.client.App;\r\nimport com.client.managers.RoomManager;\r\n\r\nimport javafx.geometry.Pos;\r\nimport javafx.scene.control.Button;\r\nimport javafx.scene.control.Label;\r\nimport javafx.scene.layout.HBox;\r\nimport javafx.scene.layout.VBox;\r\nimport javafx.scene.paint.Color;\r\nimport javafx.scene.text.Font;\r\nimport javafx.scene.text.FontWeight;\r\n\r\npublic class GameOverPopup extends VBox {\r\n\r\n    private int voteCount = 0;\r\n    private final int MIN_VOTES = 3;\r\n    private Label lblVotes;\r\n    private Button btnRematch;\r\n\r\n    public GameOverPopup(boolean isWin) {\r\n        this.setAlignment(Pos.CENTER);\r\n        this.setSpacing(20);\r\n        this.setStyle(\"-fx-background-color: rgba(0, 0, 0, 0.9); -fx-padding: 40; -fx-background-radius: 20;\");\r\n        this.setMaxSize(500, 400);\r\n\r\n        Label title = new Label(isWin ? \"VICTORY!\" : \"YOU DIED\");\r\n        title.setFont(Font.font(\"Segoe UI\", FontWeight.BOLD, 48));\r\n        title.setTextFill(isWin ? Color.GOLD : Color.RED);\r\n\r\n        // --- REMATCH SECTION ---\r\n        lblVotes = new Label(\"Rematch Votes: 0/\" + MIN_VOTES);\r\n        lblVotes.setTextFill(Color.WHITE);\r\n        lblVotes.setFont(Font.font(18));\r\n\r\n        btnRematch = new Button(\"Vote Rematch\");\r\n        styleButton(btnRematch, \"#2980b9\"); // Biru\r\n\r\n        btnRematch.setOnAction(e -> handleVote());\r\n\r\n        // Tombol Host (Accept Rematch) - Awalnya hidden\r\n        Button btnHostAccept = new Button(\"START REMATCH\");\r\n        styleButton(btnHostAccept, \"#27ae60\"); // Hijau\r\n        btnHostAccept.setVisible(false); // Muncul jika vote cukup & user adalah host\r\n\r\n        // Logic Simulasi jika vote terpenuhi\r\n        btnHostAccept.setOnAction(e -> {\r\n            App.startGame(App.currentStage); // Restart Game\r\n        });\r\n\r\n        // --- LEAVE BUTTON ---\r\n        Button btnLeave = new Button(\"Leave Room\");\r\n        styleButton(btnLeave, \"#c0392b\"); // Merah\r\n        btnLeave.setOnAction(e -> {\r\n            RoomManager.playerLeft(\"Player 1 (You)\"); // Trigger logic keluar\r\n            SceneManager.toLobby();\r\n        });\r\n\r\n        HBox buttonBox = new HBox(20, btnLeave, btnRematch);\r\n        buttonBox.setAlignment(Pos.CENTER);\r\n\r\n        this.getChildren().addAll(title, lblVotes, buttonBox, btnHostAccept);\r\n\r\n        // Simpan referensi button host biar bisa diupdate\r\n        this.btnHostStart = btnHostAccept;\r\n    }\r\n    \r\n    private Button btnHostStart;\r\n\r\n    private void handleVote() {\r\n        btnRematch.setDisable(true); // Disable biar gak spam vote\r\n        btnRematch.setText(\"Voted!\");\r\n        \r\n        // SIMULASI: Anggap player lain langsung setuju\r\n        voteCount++; // Vote kita\r\n        updateVoteUI();\r\n\r\n        // Simulasi delay bot voting (pake thread sleep ala-ala atau langsung aja)\r\n        voteCount += 2; // Simulasi 2 player lain vote\r\n        updateVoteUI();\r\n    }\r\n\r\n    private void updateVoteUI() {\r\n        lblVotes.setText(\"Rematch Votes: \" + voteCount + \"/\" + MIN_VOTES);\r\n        \r\n        // Jika vote cukup DAN kita adalah HOST -> Tampilkan tombol Start\r\n        if (voteCount >= MIN_VOTES && RoomManager.isHost()) {\r\n            btnHostStart.setVisible(true);\r\n        }\r\n    }\r\n\r\n    private void styleButton(Button btn, String color) {\r\n        btn.setStyle(\"-fx-background-color: \" + color + \"; -fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold;\");\r\n        btn.setPrefSize(160, 40);\r\n    }\r\n}"
        }
    ]
}