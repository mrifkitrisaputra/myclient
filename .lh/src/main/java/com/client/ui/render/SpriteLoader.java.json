{
    "sourceFile": "src/main/java/com/client/ui/render/SpriteLoader.java",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1764831883100,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1764831883100,
            "name": "Commit-0",
            "content": "package com.client.ui.render;\r\n\r\nimport java.io.File;\r\nimport java.net.URL;\r\nimport java.util.HashMap;\r\n\r\nimport javafx.scene.image.Image;\r\nimport javafx.scene.image.PixelReader;\r\nimport javafx.scene.image.PixelWriter;\r\nimport javafx.scene.image.WritableImage;\r\n\r\npublic class SpriteLoader {\r\n\r\n    private final HashMap<String, WritableImage> frames = new HashMap<>();\r\n    private final int TARGET_SIZE = 32;\r\n\r\n    public void loadFolder(String folderPath) {\r\n        try {\r\n            URL url = getClass().getResource(folderPath);\r\n            if (url == null) {\r\n                throw new RuntimeException(\"Folder not found: \" + folderPath);\r\n            }\r\n\r\n            File folder = new File(url.toURI());\r\n            File[] files = folder.listFiles((dir, name) -> name.endsWith(\".png\"));\r\n            if (files == null) return;\r\n\r\n            for (File file : files) {\r\n                String fileName = file.getName(); // contoh: sP2Down_0.png\r\n\r\n                Image raw = new Image(file.toURI().toString());\r\n                WritableImage resized = resizeTo32(raw);\r\n\r\n                // remove extension\r\n                String key = fileName.substring(0, fileName.lastIndexOf(\".\"));\r\n\r\n                frames.put(key, resized);\r\n            }\r\n\r\n            System.out.println(\"Loaded PNG frames: \" + frames.size());\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private WritableImage resizeTo32(Image raw) {\r\n        WritableImage out = new WritableImage(TARGET_SIZE, TARGET_SIZE);\r\n\r\n        PixelWriter pw = out.getPixelWriter();\r\n        PixelReader pr = raw.getPixelReader();\r\n\r\n        int w = (int) raw.getWidth();\r\n        int h = (int) raw.getHeight();\r\n\r\n        // nearest neighbor scaling\r\n        for (int y = 0; y < TARGET_SIZE; y++) {\r\n            for (int x = 0; x < TARGET_SIZE; x++) {\r\n                int srcX = x * w / TARGET_SIZE;\r\n                int srcY = y * h / TARGET_SIZE;\r\n                pw.setArgb(x, y, pr.getArgb(srcX, srcY));\r\n            }\r\n        }\r\n        return out;\r\n    }\r\n\r\n    public WritableImage get(String name) {\r\n        return frames.get(name);\r\n    }\r\n}\r\n"
        }
    ]
}