{
    "sourceFile": "src/main/java/com/client/ClientGameState.java",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1764832602559,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1764832631884,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,133 @@\n-package com.client;\r\n+package com.myclient;\r\n \r\n+import com.myclient.entities.VisualBomb;\r\n+import com.myclient.entities.VisualExplosion;\r\n+import com.myclient.entities.VisualItem;\r\n+import com.myclient.entities.VisualPlayer;\r\n+\r\n+import java.util.ArrayList;\r\n+import java.util.Collections;\r\n+import java.util.List;\r\n+import java.util.concurrent.CopyOnWriteArrayList;\r\n+\r\n+/**\r\n+ * Class ini menyimpan SNAPSHOT dari kondisi game saat ini.\r\n+ * Data di sini diperbarui oleh Network (saat terima paket),\r\n+ * dan dibaca oleh Renderer (saat menggambar).\r\n+ */\r\n public class ClientGameState {\r\n+\r\n+    // --- DATA GAME ---\r\n+    private int[][] map; // 0=Ground, 1=Unbreak, 2=Breakable\r\n+    private boolean gameOver = false;\r\n+    private float gameTime = 0;\r\n+\r\n+    // Gunakan CopyOnWriteArrayList atau synchronized list untuk thread-safety sederhana\r\n+    // (Karena Network Thread mengisi data, Render Thread membaca data)\r\n+    private final List<VisualPlayer> players = new CopyOnWriteArrayList<>();\r\n+    private final List<VisualBomb> bombs = new CopyOnWriteArrayList<>();\r\n+    private final List<VisualExplosion> explosions = new CopyOnWriteArrayList<>();\r\n+    private final List<VisualItem> items = new CopyOnWriteArrayList<>();\r\n+\r\n+    // --- UPDATE VISUAL ---\r\n     \r\n-}\r\n+    /**\r\n+     * Dipanggil oleh GameCanvas setiap frame (misal 60 FPS).\r\n+     * Gunanya hanya untuk memajukan animasi sprite (kaki bergerak, bom berdenyut).\r\n+     * TIDAK mengubah posisi (posisi diatur server).\r\n+     */\r\n+    public void updateVisuals(double dt) {\r\n+        for (VisualPlayer p : players) {\r\n+            p.update(dt);\r\n+        }\r\n+        for (VisualBomb b : bombs) {\r\n+            b.update(dt);\r\n+        }\r\n+        for (VisualExplosion e : explosions) {\r\n+            e.update(dt);\r\n+        }\r\n+        // Item biasanya statis, tidak butuh update animasi\r\n+    }\r\n+\r\n+    // --- SETTERS (Dipanggil oleh Network/PacketParser) ---\r\n+\r\n+    public void setMap(int[][] newMap) {\r\n+        this.map = newMap;\r\n+    }\r\n+\r\n+    public void setGameTime(float time) {\r\n+        this.gameTime = time;\r\n+    }\r\n+\r\n+    public void setGameOver(boolean status) {\r\n+        this.gameOver = status;\r\n+    }\r\n+\r\n+    // --- HELPER UNTUK UPDATE LIST ---\r\n+    \r\n+    // Biasanya server mengirim list lengkap setiap tick (Snapshot Interpolation sederhana)\r\n+    // Atau mengirim event spawn/despawn. Untuk awal, kita asumsikan server kirim update state player.\r\n+\r\n+    public VisualPlayer getPlayerById(int id) {\r\n+        // Implementasi tergantung apakah Anda menyimpan ID di VisualPlayer\r\n+        // Untuk sekarang kita return index atau null\r\n+        if (id >= 0 && id < players.size()) {\r\n+            return players.get(id);\r\n+        }\r\n+        return null;\r\n+    }\r\n+    \r\n+    public void addPlayer(VisualPlayer p) {\r\n+        players.add(p);\r\n+    }\r\n+    \r\n+    public void clearPlayers() {\r\n+        players.clear();\r\n+    }\r\n+\r\n+    public void updateBombs(List<VisualBomb> newBombs) {\r\n+        // Cara kasar: replace semua (cocok untuk game sederhana)\r\n+        bombs.clear();\r\n+        bombs.addAll(newBombs);\r\n+    }\r\n+\r\n+    public void updateExplosions(List<VisualExplosion> newExplosions) {\r\n+        explosions.clear();\r\n+        explosions.addAll(newExplosions);\r\n+    }\r\n+\r\n+    public void updateItems(List<VisualItem> newItems) {\r\n+        items.clear();\r\n+        items.addAll(newItems);\r\n+    }\r\n+\r\n+    // --- GETTERS (Dipanggil oleh GameRenderer) ---\r\n+\r\n+    public int[][] getMap() {\r\n+        return map;\r\n+    }\r\n+\r\n+    public List<VisualPlayer> getPlayers() {\r\n+        return players;\r\n+    }\r\n+\r\n+    public List<VisualBomb> getBombs() {\r\n+        return bombs;\r\n+    }\r\n+\r\n+    public List<VisualExplosion> getExplosions() {\r\n+        return explosions;\r\n+    }\r\n+\r\n+    public List<VisualItem> getItems() {\r\n+        return items;\r\n+    }\r\n+\r\n+    public float getGameTime() {\r\n+        return gameTime;\r\n+    }\r\n+\r\n+    public boolean isGameOver() {\r\n+        return gameOver;\r\n+    }\r\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1764832637391,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-package com.myclient;\r\n+package com.client;\r\n \r\n import com.myclient.entities.VisualBomb;\r\n import com.myclient.entities.VisualExplosion;\r\n import com.myclient.entities.VisualItem;\r\n"
                },
                {
                    "date": 1764832643750,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,9 @@\n \r\n import com.client.entities.VisualBomb;\r\n import com.client.entities.VisualExplosion;\r\n import com.client.entities.VisualItem;\r\n-import com.mclient.entities.VisualPlayer;\r\n+import com.client.entities.VisualPlayer;\r\n \r\n import java.util.ArrayList;\r\n import java.util.Collections;\r\n import java.util.List;\r\n"
                },
                {
                    "date": 1764837265278,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,14 +1,14 @@\n-package com.client;\r\n+package com.myclient;\r\n \r\n+import com.myclient.entities.VisualBomb;\r\n+import com.myclient.entities.VisualExplosion;\r\n+import com.myclient.entities.VisualItem;\r\n+import com.myclient.entities.VisualPlayer;\r\n+\r\n import java.util.List;\r\n import java.util.concurrent.CopyOnWriteArrayList;\r\n \r\n-import com.client.entities.VisualBomb;\r\n-import com.client.entities.VisualExplosion;\r\n-import com.client.entities.VisualItem;\r\n-import com.client.entities.VisualPlayer;\r\n-\r\n /**\r\n  * Class ini menyimpan SNAPSHOT dari kondisi game saat ini.\r\n  * Data di sini diperbarui oleh Network (saat terima paket),\r\n  * dan dibaca oleh Renderer (saat menggambar).\r\n@@ -19,37 +19,22 @@\n     private int[][] map; // 0=Ground, 1=Unbreak, 2=Breakable\r\n     private boolean gameOver = false;\r\n     private float gameTime = 0;\r\n \r\n-    // Gunakan CopyOnWriteArrayList atau synchronized list untuk thread-safety sederhana\r\n-    // (Karena Network Thread mengisi data, Render Thread membaca data)\r\n+    // Thread-safe list untuk menghindari crash saat render & update bersamaan\r\n     private final List<VisualPlayer> players = new CopyOnWriteArrayList<>();\r\n     private final List<VisualBomb> bombs = new CopyOnWriteArrayList<>();\r\n     private final List<VisualExplosion> explosions = new CopyOnWriteArrayList<>();\r\n     private final List<VisualItem> items = new CopyOnWriteArrayList<>();\r\n \r\n-    // --- UPDATE VISUAL ---\r\n-    \r\n-    /**\r\n-     * Dipanggil oleh GameCanvas setiap frame (misal 60 FPS).\r\n-     * Gunanya hanya untuk memajukan animasi sprite (kaki bergerak, bom berdenyut).\r\n-     * TIDAK mengubah posisi (posisi diatur server).\r\n-     */\r\n+    // --- UPDATE VISUAL (Animasi) ---\r\n     public void updateVisuals(double dt) {\r\n-        for (VisualPlayer p : players) {\r\n-            p.update(dt);\r\n-        }\r\n-        for (VisualBomb b : bombs) {\r\n-            b.update(dt);\r\n-        }\r\n-        for (VisualExplosion e : explosions) {\r\n-            e.update(dt);\r\n-        }\r\n-        // Item biasanya statis, tidak butuh update animasi\r\n+        for (VisualPlayer p : players) p.update(dt);\r\n+        for (VisualBomb b : bombs) b.update(dt);\r\n+        for (VisualExplosion e : explosions) e.update(dt);\r\n     }\r\n \r\n-    // --- SETTERS (Dipanggil oleh Network/PacketParser) ---\r\n-\r\n+    // --- SETTERS (Dari Network) ---\r\n     public void setMap(int[][] newMap) {\r\n         this.map = newMap;\r\n     }\r\n \r\n@@ -60,32 +45,16 @@\n     public void setGameOver(boolean status) {\r\n         this.gameOver = status;\r\n     }\r\n \r\n-    // --- HELPER UNTUK UPDATE LIST ---\r\n+    // --- UPDATERS (Method yang menyebabkan error sebelumnya) ---\r\n     \r\n-    // Biasanya server mengirim list lengkap setiap tick (Snapshot Interpolation sederhana)\r\n-    // Atau mengirim event spawn/despawn. Untuk awal, kita asumsikan server kirim update state player.\r\n-\r\n-    public VisualPlayer getPlayerById(int id) {\r\n-        // Implementasi tergantung apakah Anda menyimpan ID di VisualPlayer\r\n-        // Untuk sekarang kita return index atau null\r\n-        if (id >= 0 && id < players.size()) {\r\n-            return players.get(id);\r\n-        }\r\n-        return null;\r\n-    }\r\n-    \r\n-    public void addPlayer(VisualPlayer p) {\r\n-        players.add(p);\r\n-    }\r\n-    \r\n-    public void clearPlayers() {\r\n+    public void updatePlayers(List<VisualPlayer> newPlayers) {\r\n         players.clear();\r\n+        players.addAll(newPlayers);\r\n     }\r\n \r\n     public void updateBombs(List<VisualBomb> newBombs) {\r\n-        // Cara kasar: replace semua (cocok untuk game sederhana)\r\n         bombs.clear();\r\n         bombs.addAll(newBombs);\r\n     }\r\n \r\n@@ -97,35 +66,18 @@\n     public void updateItems(List<VisualItem> newItems) {\r\n         items.clear();\r\n         items.addAll(newItems);\r\n     }\r\n-\r\n-    // --- GETTERS (Dipanggil oleh GameRenderer) ---\r\n-\r\n-    public int[][] getMap() {\r\n-        return map;\r\n+    \r\n+    public void clearPlayers() {\r\n+        players.clear();\r\n     }\r\n \r\n-    public List<VisualPlayer> getPlayers() {\r\n-        return players;\r\n-    }\r\n-\r\n-    public List<VisualBomb> getBombs() {\r\n-        return bombs;\r\n-    }\r\n-\r\n-    public List<VisualExplosion> getExplosions() {\r\n-        return explosions;\r\n-    }\r\n-\r\n-    public List<VisualItem> getItems() {\r\n-        return items;\r\n-    }\r\n-\r\n-    public float getGameTime() {\r\n-        return gameTime;\r\n-    }\r\n-\r\n-    public boolean isGameOver() {\r\n-        return gameOver;\r\n-    }\r\n+    // --- GETTERS (Untuk Renderer) ---\r\n+    public int[][] getMap() { return map; }\r\n+    public List<VisualPlayer> getPlayers() { return players; }\r\n+    public List<VisualBomb> getBombs() { return bombs; }\r\n+    public List<VisualExplosion> getExplosions() { return explosions; }\r\n+    public List<VisualItem> getItems() { return items; }\r\n+    public float getGameTime() { return gameTime; }\r\n+    public boolean isGameOver() { return gameOver; }\r\n }\n\\ No newline at end of file\n"
                }
            ],
            "date": 1764832602559,
            "name": "Commit-0",
            "content": "package com.client;\r\n\r\npublic class ClientGameState {\r\n    \r\n}\r\n"
        }
    ]
}