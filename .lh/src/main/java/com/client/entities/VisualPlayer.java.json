{
    "sourceFile": "src/main/java/com/client/entities/VisualPlayer.java",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1764831809635,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1764831814802,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n package com.myclient.entities;\r\n \r\n-import com.client.render.SpriteAnimation;\r\n-import com.client.render.SpriteLoader;\r\n+import com.myclient.render.SpriteAnimation;\r\n+import com.myclient.render.SpriteLoader;\r\n import javafx.scene.canvas.GraphicsContext;\r\n import javafx.scene.image.Image;\r\n \r\n public class VisualPlayer {\r\n"
                },
                {
                    "date": 1764831877602,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,46 @@\n+package com.myclient.entities;\r\n+\r\n+import javafx.scene.canvas.GraphicsContext;\r\n+import javafx.scene.image.Image;\r\n+\r\n+public class VisualBomb {\r\n+    public final int tileX;\r\n+    public final int tileY;\r\n+    \r\n+    // Animasi\r\n+    private final Image[] sprites;\r\n+    private final float frameInterval = 0.2f;\r\n+    private float animTimer = 0;\r\n+    private int frameIndex = 0;\r\n+\r\n+    private final int tileSize = 32;\r\n+    private final int bombSize = 28;\r\n+\r\n+    public VisualBomb(int tileX, int tileY) {\r\n+        this.tileX = tileX;\r\n+        this.tileY = tileY;\r\n+\r\n+        // Load Gambar langsung (Atau inject SpriteLoader lebih baik)\r\n+        sprites = new Image[3];\r\n+        sprites[0] = new Image(getClass().getResourceAsStream(\"/com/client/assets/bomb/bom1.png\"), bombSize, bombSize, false, false);\r\n+        sprites[1] = new Image(getClass().getResourceAsStream(\"/com/client/assets/bomb/bom2.png\"), bombSize, bombSize, false, false);\r\n+        sprites[2] = new Image(getClass().getResourceAsStream(\"/com/client/assets/bomb/bom3.png\"), bombSize, bombSize, false, false);\r\n+    }\r\n+\r\n+    public void update(double dt) {\r\n+        // Hanya update animasi denyut\r\n+        animTimer += dt;\r\n+        if (animTimer >= frameInterval) {\r\n+            animTimer = 0;\r\n+            frameIndex = (frameIndex + 1) % sprites.length;\r\n+        }\r\n+    }\r\n+\r\n+    public void render(GraphicsContext g) {\r\n+        double px = tileX * tileSize;\r\n+        double py = tileY * tileSize;\r\n+        double offset = (tileSize - bombSize) / 2.0;\r\n+\r\n+        g.drawImage(sprites[frameIndex], px + offset, py + offset, bombSize, bombSize);\r\n+    }\r\n+}\n\\ No newline at end of file\n"
                }
            ],
            "date": 1764831809635,
            "name": "Commit-0",
            "content": "package com.myclient.entities;\r\n\r\nimport com.myclient.render.SpriteAnimation;\r\nimport com.client.render.SpriteLoader;\r\nimport javafx.scene.canvas.GraphicsContext;\r\nimport javafx.scene.image.Image;\r\n\r\npublic class VisualPlayer {\r\n\r\n    // Posisi (Server Authoritative)\r\n    public double x;\r\n    public double y;\r\n    \r\n    // Status Visual\r\n    public enum State { IDLE, WALK, PLACE, DEAD }\r\n    public enum Direction { DOWN, UP, LEFT, RIGHT }\r\n\r\n    public State state = State.IDLE;\r\n    public Direction dir = Direction.DOWN;\r\n\r\n    // Animasi\r\n    private final SpriteAnimation animIdleDown;\r\n    private final SpriteAnimation animIdleUp;\r\n    private final SpriteAnimation animIdleLeft;\r\n    private final SpriteAnimation animIdleRight;\r\n\r\n    private final SpriteAnimation animWalkDown;\r\n    private final SpriteAnimation animWalkUp;\r\n    private final SpriteAnimation animWalkLeft;\r\n    private final SpriteAnimation animWalkRight;\r\n\r\n    private final SpriteAnimation animDeath;\r\n\r\n    private final int offsetX = 0; // Sesuaikan offset sprite jika perlu\r\n    private final int offsetY = -16; // Biasanya sprite char agak naik dari tile\r\n\r\n    public VisualPlayer(SpriteLoader loader) {\r\n        // --- IDLE ---\r\n        animIdleDown  = new SpriteAnimation(loadFrames(loader, \"sP2DownIdle_\", 1));\r\n        animIdleUp    = new SpriteAnimation(loadFrames(loader, \"sP2UpIdle_\", 1));\r\n        animIdleLeft  = new SpriteAnimation(loadFrames(loader, \"sP2LeftIdle_\", 1));\r\n        animIdleRight = new SpriteAnimation(loadFrames(loader, \"sP2RightIdle_\", 1));\r\n\r\n        // --- WALK ---\r\n        animWalkDown  = new SpriteAnimation(loadFrames(loader, \"sP2Down_\", 2));\r\n        animWalkUp    = new SpriteAnimation(loadFrames(loader, \"sP2Up_\", 2));\r\n        animWalkLeft  = new SpriteAnimation(loadFrames(loader, \"sP2Left_\", 3));\r\n        animWalkRight = new SpriteAnimation(loadFrames(loader, \"sP2Right_\", 3));\r\n\r\n        // --- DEATH ---\r\n        animDeath = new SpriteAnimation(loadFrames(loader, \"sP2Death_\", 7));\r\n        animDeath.setLoop(false);\r\n    }\r\n\r\n    // Dipanggil setiap kali terima paket dari Server\r\n    public void setNetworkState(double x, double y, State state, Direction dir) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.state = state;\r\n        this.dir = dir;\r\n    }\r\n\r\n    // Helper load frames\r\n    private Image[] loadFrames(SpriteLoader loader, String base, int count) {\r\n        Image[] temp = new Image[count];\r\n        int idx = 0;\r\n        for (int i = 0; i < count; i++) {\r\n            Image img = loader.get(base + i);\r\n            if (img != null) temp[idx++] = img;\r\n        }\r\n        if (idx == 0) return new Image[]{ new javafx.scene.image.WritableImage(1, 1) };\r\n        Image[] frames = new Image[idx];\r\n        System.arraycopy(temp, 0, frames, 0, idx);\r\n        return frames;\r\n    }\r\n\r\n    // Update hanya memajukan frame animasi\r\n    public void update(double dt) {\r\n        switch (state) {\r\n            case IDLE -> {\r\n                switch (dir) {\r\n                    case DOWN -> animIdleDown.update(dt);\r\n                    case UP -> animIdleUp.update(dt);\r\n                    case LEFT -> animIdleLeft.update(dt);\r\n                    case RIGHT -> animIdleRight.update(dt);\r\n                }\r\n            }\r\n            case WALK -> {\r\n                switch (dir) {\r\n                    case DOWN -> animWalkDown.update(dt);\r\n                    case UP -> animWalkUp.update(dt);\r\n                    case LEFT -> animWalkLeft.update(dt);\r\n                    case RIGHT -> animWalkRight.update(dt);\r\n                }\r\n            }\r\n            case DEAD -> animDeath.update(dt);\r\n            case PLACE -> animIdleDown.update(dt); // Fallback\r\n        }\r\n    }\r\n\r\n    public void render(GraphicsContext g) {\r\n        Image frame = null;\r\n\r\n        switch (state) {\r\n            case IDLE -> {\r\n                switch (dir) {\r\n                    case DOWN -> frame = animIdleDown.getCurrentFrame();\r\n                    case UP -> frame = animIdleUp.getCurrentFrame();\r\n                    case LEFT -> frame = animIdleLeft.getCurrentFrame();\r\n                    case RIGHT -> frame = animIdleRight.getCurrentFrame();\r\n                }\r\n            }\r\n            case WALK -> {\r\n                switch (dir) {\r\n                    case DOWN -> frame = animWalkDown.getCurrentFrame();\r\n                    case UP -> frame = animWalkUp.getCurrentFrame();\r\n                    case LEFT -> frame = animWalkLeft.getCurrentFrame();\r\n                    case RIGHT -> frame = animWalkRight.getCurrentFrame();\r\n                }\r\n            }\r\n            case DEAD -> frame = animDeath.getCurrentFrame();\r\n            case PLACE -> frame = animIdleDown.getCurrentFrame();\r\n        }\r\n\r\n        if (frame != null) {\r\n            // Gambar di posisi X,Y yang dikirim server\r\n            g.drawImage(frame, x + offsetX, y + offsetY);\r\n        }\r\n    }\r\n}"
        }
    ]
}